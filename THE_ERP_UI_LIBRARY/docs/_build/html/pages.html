<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Pages &#8212; SML Dissertation Project 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=27fed22d" />
    <script src="_static/documentation_options.js?v=f2a433a1"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Utilities" href="utils.html" />
    <link rel="prev" title="Dashboard Components" href="dashboard_components.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="pages">
<h1>Pages<a class="headerlink" href="#pages" title="Link to this heading">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>The Pages module provides a framework for creating complete application screens in an ERP system using Standard ML and functional programming principles. Instead of requiring developers to build each page from scratch, the library offers a collection of pre-built templates and a flexible composition system.</p>
<p>This documentation will guide you through:</p>
<ol class="arabic simple">
<li><p>How to create any page using the BasePage pattern</p></li>
<li><p>Sample page implementations you can customize</p></li>
<li><p>Component integration patterns for building rich interfaces</p></li>
</ol>
</section>
<section id="creating-pages-the-basepage-pattern">
<h2>Creating Pages: The BasePage Pattern<a class="headerlink" href="#creating-pages-the-basepage-pattern" title="Link to this heading">¶</a></h2>
<p>All pages in the ERP UI Library follow a consistent structure created using the <code class="docutils literal notranslate"><span class="pre">BasePage</span></code> functor. This powerful pattern allows you to create standardized pages while customizing only what’s necessary.</p>
<p><strong>Creating a New Page in 3 Steps:</strong></p>
<ol class="arabic">
<li><p><strong>Define your page using the BasePage functor</strong></p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* Step 1: Define your page structure using the BasePage functor *)</span>
<span class="kr">structure</span> <span class="nn">MyCustomPage</span> <span class="p">=</span> <span class="n">BasePage</span><span class="p">(</span><span class="kr">struct</span>
    <span class="kr">val</span> <span class="nv">title</span> <span class="p">=</span> <span class="s2">&quot;My Custom Page&quot;</span>
<span class="kr">end</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><strong>Create the page instance and get content container</strong></p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* Step 2: Create the page and get the content container *)</span>
<span class="kr">val</span> <span class="p">(</span><span class="n">pageWidget</span><span class="p">,</span> <span class="n">contentContainer</span><span class="p">)</span> <span class="nv">=</span> <span class="nn">MyCustomPage</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span>
    <span class="n">stack</span> <span class="p">=</span> <span class="n">navigationStack</span><span class="p">,</span>   <span class="cm">(* GTK Stack for navigation *)</span>
    <span class="n">menuItems</span> <span class="p">=</span> <span class="n">SOME</span> <span class="p">[</span>         <span class="cm">(* Optional navigation menu items *)</span>
        <span class="p">(</span><span class="s2">&quot;Dashboard&quot;</span><span class="p">,</span> <span class="s2">&quot;dashboard&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;Inventory&quot;</span><span class="p">,</span> <span class="s2">&quot;inventory&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;Settings&quot;</span><span class="p">,</span> <span class="s2">&quot;settings&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;Logout&quot;</span><span class="p">,</span> <span class="s2">&quot;login&quot;</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p><strong>Add your custom content to the container</strong></p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* Step 3: Add your custom content to the container *)</span>
<span class="cm">(* Create your content widgets *)</span>
<span class="kr">val</span> <span class="nv">titleLabel</span> <span class="p">=</span> <span class="nn">Label</span><span class="p">.</span><span class="n">newWithMarkup</span> <span class="s2">&quot;&lt;b&gt;Welcome to My Custom Page&lt;/b&gt;&quot;</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setHalign</span> <span class="n">titleLabel</span> <span class="nn">Align</span><span class="p">.</span><span class="n">START</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginBottom</span> <span class="n">titleLabel</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">small</span>

<span class="kr">val</span> <span class="nv">infoPanel</span> <span class="p">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">new</span> <span class="p">(</span><span class="nn">Orientation</span><span class="p">.</span><span class="n">VERTICAL</span><span class="p">,</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">small</span><span class="p">)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Container</span><span class="p">.</span><span class="n">setBorderWidth</span> <span class="n">infoPanel</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">inset</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginTop</span> <span class="n">infoPanel</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">medium</span>

<span class="cm">(* Add to content container *)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">packStart</span> <span class="n">contentContainer</span> <span class="p">(</span><span class="n">titleLabel</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">packStart</span> <span class="n">contentContainer</span> <span class="p">(</span><span class="n">infoPanel</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ol>
<p><strong>That’s it!</strong> Your page now has:</p>
<ul class="simple">
<li><p>Professional header with logo and user information</p></li>
<li><p>Navigation menu with standardized links</p></li>
<li><p>Scrollable content area with your custom content</p></li>
<li><p>Consistent footer with copyright</p></li>
</ul>
<p><strong>Standard Page Properties</strong></p>
<p>Each page created with BasePage automatically includes:</p>
<ul class="simple">
<li><p><strong>Header</strong>: Logo, page title, and username display</p></li>
<li><p><strong>Navigation</strong>: Optional menu bar with application navigation</p></li>
<li><p><strong>Content Area</strong>: Scrollable container for page-specific widgets</p></li>
<li><p><strong>Footer</strong>: Copyright and version information</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The BasePage functor is especially powerful because it helps enforce consistency across your application while allowing for specific customization.</p>
</div>
</section>
<section id="page-templates">
<h2>Page Templates<a class="headerlink" href="#page-templates" title="Link to this heading">¶</a></h2>
<p>The library provides several pre-built page templates you can use as starting points for your ERP application. These pages demonstrate common patterns and components assembled for specific business functions.</p>
<section id="loginpage-authentication-template">
<h3>LoginPage: Authentication Template<a class="headerlink" href="#loginpage-authentication-template" title="Link to this heading">¶</a></h3>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(******************************************************************************</span>
<span class="cm"> * BasePage: Functor for constructing standardized ERP UI pages.</span>
<span class="cm"> *</span>
<span class="cm"> * Parameters:</span>
<span class="cm"> *   Inputs.title : string - The title to display in the header.</span>
<span class="cm"> *</span>
<span class="cm"> * Usage:</span>
<span class="cm"> *   structure MyPage = BasePage(struct val title = &quot;Dashboard&quot; end)</span>
<span class="cm"> *</span>
<span class="cm"> * Provides:</span>
<span class="cm"> *   val create : {stack, menuItems} -&gt; Gtk.Box.t * Gtk.Box.t</span>
<span class="cm"> *****************************************************************************)</span>
<span class="kr">functor</span> <span class="nn">BasePage</span> <span class="p">(</span><span class="n">Inputs</span><span class="p">:</span> <span class="kr">sig</span>
    <span class="kr">val</span> <span class="nv">title</span> <span class="p">:</span> <span class="n">string</span>
  <span class="kr">end</span><span class="p">)</span> <span class="p">:</span> <span class="n">PAGE</span> <span class="p">=</span> <span class="kr">struct</span>
</pre></div>
</div>
<p>The BasePage functor returns a module that conforms to the PAGE signature:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="kr">signature</span> <span class="nn">PAGE</span> <span class="p">=</span> <span class="kr">sig</span>
  <span class="kr">val</span> <span class="nv">create</span> <span class="p">:</span> <span class="p">{</span> <span class="n">stack</span> <span class="p">:</span> <span class="nn">Gtk</span><span class="p">.</span><span class="nn">Stack</span><span class="p">.</span><span class="n">t</span><span class="p">,</span> <span class="n">menuItems</span> <span class="p">:</span> <span class="p">(</span><span class="n">string</span> <span class="n">*</span> <span class="n">string</span><span class="p">)</span> <span class="n">list</span> <span class="n">option</span> <span class="p">}</span> <span class="p">-&gt;</span> <span class="nn">Gtk</span><span class="p">.</span><span class="nn">Box</span><span class="p">.</span><span class="n">t</span> <span class="n">*</span> <span class="nn">Gtk</span><span class="p">.</span><span class="nn">Box</span><span class="p">.</span><span class="n">t</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
</section>
<section id="creating-a-page-using-basepage">
<h2>Creating a Page Using BasePage<a class="headerlink" href="#creating-a-page-using-basepage" title="Link to this heading">¶</a></h2>
<p>Any page using BasePage receives a standard layout, with the ability to customize navigation and content. The following real example from <code class="docutils literal notranslate"><span class="pre">DashboardPage.sml</span></code> shows how to apply the BasePage functor:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* Apply the BasePage functor *)</span>
<span class="kr">structure</span> <span class="nn">DashboardBase</span> <span class="p">=</span> <span class="n">BasePage</span><span class="p">(</span><span class="kr">struct</span> <span class="kr">val</span> <span class="nv">title</span> <span class="p">=</span> <span class="s2">&quot;Dashboard&quot;</span> <span class="kr">end</span><span class="p">)</span>

<span class="cm">(* Updated signature to match PAGE signature *)</span>
<span class="kr">fun</span> <span class="nf">create</span> <span class="p">{</span><span class="n">stack</span><span class="p">:</span> <span class="nn">Gtk</span><span class="p">.</span><span class="nn">Stack</span><span class="p">.</span><span class="n">t</span><span class="p">,</span> <span class="n">menuItems</span><span class="p">:</span> <span class="p">(</span><span class="n">string</span> <span class="n">*</span> <span class="n">string</span><span class="p">)</span> <span class="n">list</span> <span class="n">option</span><span class="p">}</span> <span class="p">=</span>
  <span class="kr">let</span>
    <span class="cm">(* Use the passed menuItems for BasePage *)</span>
    <span class="kr">val</span> <span class="p">(</span><span class="n">basePage</span><span class="p">,</span> <span class="n">contentBox</span><span class="p">)</span> <span class="nv">=</span> <span class="nn">DashboardBase</span><span class="p">.</span><span class="n">create</span><span class="p">{</span>
      <span class="n">stack</span> <span class="p">=</span> <span class="n">stack</span><span class="p">,</span>
      <span class="n">menuItems</span> <span class="p">=</span> <span class="n">menuItems</span>
    <span class="p">}</span>

    <span class="cm">(* Add dashboard-specific content to contentBox *)</span>
    <span class="p">...</span>
  <span class="kr">in</span>
    <span class="p">(</span><span class="n">basePage</span><span class="p">,</span> <span class="n">contentBox</span><span class="p">)</span>
  <span class="kr">end</span>
</pre></div>
</div>
</section>
<section id="navigation-in-basepage">
<h2>Navigation in BasePage<a class="headerlink" href="#navigation-in-basepage" title="Link to this heading">¶</a></h2>
<p>The BasePage functor handles navigation between pages using the provided menu items. From <code class="docutils literal notranslate"><span class="pre">BasePage.sml</span></code>:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* Creates menu bar *)</span>
<span class="kr">fun</span> <span class="nf">createMenuBar</span> <span class="p">(</span><span class="n">stack</span> <span class="p">:</span> <span class="nn">Gtk</span><span class="p">.</span><span class="nn">Stack</span><span class="p">.</span><span class="n">t</span><span class="p">,</span> <span class="n">items</span> <span class="p">:</span> <span class="p">(</span><span class="n">string</span> <span class="n">*</span> <span class="n">string</span><span class="p">)</span> <span class="n">list</span><span class="p">)</span> <span class="p">=</span>
  <span class="kr">let</span>
    <span class="kr">val</span> <span class="nv">menuBarBox</span> <span class="p">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">new</span> <span class="p">(</span><span class="nn">Orientation</span><span class="p">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">small</span><span class="p">)</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Container</span><span class="p">.</span><span class="n">setBorderWidth</span> <span class="n">menuBarBox</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">xsmall</span>

    <span class="kr">fun</span> <span class="nf">createMenuButton</span> <span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">pageName</span><span class="p">)</span> <span class="p">=</span>
      <span class="kr">let</span>
        <span class="kr">val</span> <span class="nv">button</span> <span class="p">=</span> <span class="nn">Button</span><span class="p">.</span><span class="n">newWithLabel</span> <span class="n">label</span>
        <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Button</span><span class="p">.</span><span class="n">setRelief</span> <span class="n">button</span> <span class="nn">ReliefStyle</span><span class="p">.</span><span class="n">NONE</span>
        <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginStart</span> <span class="n">button</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">small</span>
        <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginEnd</span> <span class="n">button</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">small</span>

        <span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Signal</span><span class="p">.</span><span class="n">connect</span> <span class="n">button</span> <span class="p">(</span><span class="nn">Button</span><span class="p">.</span><span class="n">clickedSig</span><span class="p">,</span> <span class="kr">fn</span> <span class="p">_</span> <span class="p">=&gt;</span>
          <span class="kr">let</span>
            <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="n">print</span> <span class="p">(</span><span class="s2">&quot;Navigating to &quot;</span> <span class="n">^</span> <span class="n">pageName</span> <span class="n">^</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Stack</span><span class="p">.</span><span class="n">setVisibleChildName</span> <span class="n">stack</span> <span class="n">pageName</span>
          <span class="kr">in</span>
            <span class="p">()</span>
          <span class="kr">end</span><span class="p">)</span>
      <span class="kr">in</span>
        <span class="n">button</span>
      <span class="kr">end</span>
</pre></div>
</div>
</section>
<section id="loginpage-implementation">
<h2>LoginPage Implementation<a class="headerlink" href="#loginpage-implementation" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">LoginPage</span></code> provides authentication functionality. From <code class="docutils literal notranslate"><span class="pre">LoginPage.sml</span></code>:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="kr">structure</span> <span class="nn">LoginPage</span> <span class="p">=</span> <span class="kr">struct</span>

  <span class="kr">val</span> <span class="nv">validUsers</span> <span class="p">=</span> <span class="p">[(</span><span class="s2">&quot;admin&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">)]</span>

  <span class="kr">fun</span> <span class="nf">authenticate</span> <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span> <span class="p">=</span>
    <span class="nn">List</span><span class="p">.</span><span class="n">exists</span> <span class="p">(</span><span class="kr">fn</span> <span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">u</span> <span class="p">=</span> <span class="n">username</span> <span class="kr">andalso</span> <span class="n">p</span> <span class="p">=</span> <span class="n">password</span><span class="p">)</span> <span class="n">validUsers</span>

  <span class="cm">(* Create the base page here outside the create function*)</span>
  <span class="kr">structure</span> <span class="nn">LoginPageBase</span> <span class="p">=</span> <span class="n">BasePage</span><span class="p">(</span><span class="kr">struct</span> <span class="kr">val</span> <span class="nv">title</span> <span class="p">=</span> <span class="s2">&quot;Login&quot;</span> <span class="kr">end</span><span class="p">)</span>

  <span class="kr">fun</span> <span class="nf">create</span> <span class="p">{</span><span class="n">stack</span><span class="p">:</span> <span class="nn">Gtk</span><span class="p">.</span><span class="nn">Stack</span><span class="p">.</span><span class="n">t</span><span class="p">}</span> <span class="p">=</span>
    <span class="kr">let</span>
      <span class="kr">open</span> <span class="nn">Gtk</span>

      <span class="kr">val</span> <span class="p">(</span><span class="n">basePage</span><span class="p">,</span> <span class="n">contentBox</span><span class="p">)</span> <span class="nv">=</span> <span class="nn">LoginPageBase</span><span class="p">.</span><span class="n">create</span><span class="p">{</span> <span class="n">stack</span> <span class="p">=</span> <span class="n">stack</span><span class="p">,</span> <span class="n">menuItems</span> <span class="p">=</span> <span class="n">NONE</span> <span class="p">}</span>

      <span class="kr">val</span> <span class="nv">loginForm</span> <span class="p">=</span> <span class="n">createLoginForm</span> <span class="n">stack</span>

      <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">packStart</span> <span class="n">contentBox</span> <span class="p">(</span><span class="n">loginForm</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="kr">in</span>
      <span class="n">basePage</span>
    <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
<p>The login form includes username and password fields with validation:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Signal</span><span class="p">.</span><span class="n">connect</span> <span class="n">loginButton</span> <span class="p">(</span><span class="nn">Button</span><span class="p">.</span><span class="n">clickedSig</span><span class="p">,</span> <span class="kr">fn</span> <span class="p">_</span> <span class="p">=&gt;</span>
  <span class="kr">let</span>
    <span class="kr">val</span> <span class="nv">username</span> <span class="p">=</span> <span class="nn">Entry</span><span class="p">.</span><span class="n">getText</span> <span class="n">usernameEntry</span>
    <span class="kr">val</span> <span class="nv">password</span> <span class="p">=</span> <span class="nn">Entry</span><span class="p">.</span><span class="n">getText</span> <span class="n">passwordEntry</span>
    <span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="n">print</span> <span class="p">(</span><span class="s2">&quot;Login attempt: &quot;</span> <span class="n">^</span> <span class="n">username</span> <span class="n">^</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="kr">val</span> <span class="nv">loginSuccess</span> <span class="p">=</span> <span class="n">authenticate</span> <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="kr">if</span> <span class="n">loginSuccess</span> <span class="kr">then</span>
      <span class="p">(</span>
        <span class="nn">AppState</span><span class="p">.</span><span class="n">setCurrentUser</span> <span class="n">username</span><span class="p">;</span>
        <span class="nn">Stack</span><span class="p">.</span><span class="n">setVisibleChildName</span> <span class="n">stack</span> <span class="s2">&quot;dashboard&quot;</span><span class="p">;</span>
        <span class="n">print</span> <span class="s2">&quot;Navigating to Dashboard...</span><span class="se">\n</span><span class="s2">&quot;</span>
      <span class="p">)</span>
    <span class="kr">else</span>
      <span class="p">(</span>
        <span class="nn">ErrorDialog</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span>
          <span class="n">title</span> <span class="p">=</span> <span class="s2">&quot;Login Error&quot;</span><span class="p">,</span>
          <span class="n">message</span> <span class="p">=</span> <span class="s2">&quot;Invalid username or password.&quot;</span>
        <span class="p">}</span>
      <span class="p">)</span>
  <span class="kr">in</span>
    <span class="p">()</span>
  <span class="kr">end</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="dashboardpage-implementation">
<h2>DashboardPage Implementation<a class="headerlink" href="#dashboardpage-implementation" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">DashboardPage</span></code> displays key performance indicators in a grid layout. From <code class="docutils literal notranslate"><span class="pre">DashboardPage.sml</span></code>:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* Create KPI Cards using the reusable component *)</span>
<span class="kr">val</span> <span class="nv">kpiSales</span> <span class="p">=</span> <span class="nn">KPICard</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span><span class="n">label</span> <span class="p">=</span> <span class="s2">&quot;Today&#39;s Sales&quot;</span><span class="p">,</span> <span class="n">value</span> <span class="p">=</span> <span class="s2">&quot;$12,345&quot;</span><span class="p">,</span> <span class="n">trend</span> <span class="p">=</span> <span class="n">SOME</span> <span class="s2">&quot;+12% vs last month&quot;</span><span class="p">}</span>
<span class="kr">val</span> <span class="nv">kpiOrders</span> <span class="p">=</span> <span class="nn">KPICard</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span><span class="n">label</span> <span class="p">=</span> <span class="s2">&quot;Open Orders&quot;</span><span class="p">,</span> <span class="n">value</span> <span class="p">=</span> <span class="s2">&quot;8&quot;</span><span class="p">,</span> <span class="n">trend</span> <span class="p">=</span> <span class="n">NONE</span><span class="p">}</span>
<span class="kr">val</span> <span class="nv">kpiInventory</span> <span class="p">=</span> <span class="nn">KPICard</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span><span class="n">label</span> <span class="p">=</span> <span class="s2">&quot;Items Low Stock&quot;</span><span class="p">,</span> <span class="n">value</span> <span class="p">=</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">trend</span> <span class="p">=</span> <span class="n">NONE</span><span class="p">}</span>
<span class="kr">val</span> <span class="nv">kpiRevenue</span> <span class="p">=</span> <span class="nn">KPICard</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span><span class="n">label</span> <span class="p">=</span> <span class="s2">&quot;Monthly Revenue&quot;</span><span class="p">,</span> <span class="n">value</span> <span class="p">=</span> <span class="s2">&quot;$45,876&quot;</span><span class="p">,</span> <span class="n">trend</span> <span class="p">=</span> <span class="n">SOME</span> <span class="s2">&quot;+5% vs last month&quot;</span><span class="p">}</span>
<span class="kr">val</span> <span class="nv">kpiCustomers</span> <span class="p">=</span> <span class="nn">KPICard</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span><span class="n">label</span> <span class="p">=</span> <span class="s2">&quot;New Customers&quot;</span><span class="p">,</span> <span class="n">value</span> <span class="p">=</span> <span class="s2">&quot;12&quot;</span><span class="p">,</span> <span class="n">trend</span> <span class="p">=</span> <span class="n">NONE</span><span class="p">}</span>
<span class="kr">val</span> <span class="nv">kpiShipment</span> <span class="p">=</span> <span class="nn">KPICard</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span><span class="n">label</span> <span class="p">=</span> <span class="s2">&quot;Shipment&quot;</span><span class="p">,</span> <span class="n">value</span> <span class="p">=</span> <span class="s2">&quot;25&quot;</span><span class="p">,</span> <span class="n">trend</span> <span class="p">=</span> <span class="n">NONE</span><span class="p">}</span>

<span class="cm">(* Add KPI cards to the grid - Use correct tuple syntax and center them *)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Grid</span><span class="p">.</span><span class="n">attach</span> <span class="n">dashboardGrid</span> <span class="p">(</span><span class="n">kpiSales</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Grid</span><span class="p">.</span><span class="n">attach</span> <span class="n">dashboardGrid</span> <span class="p">(</span><span class="n">kpiOrders</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Grid</span><span class="p">.</span><span class="n">attach</span> <span class="n">dashboardGrid</span> <span class="p">(</span><span class="n">kpiInventory</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Grid</span><span class="p">.</span><span class="n">attach</span> <span class="n">dashboardGrid</span> <span class="p">(</span><span class="n">kpiRevenue</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Grid</span><span class="p">.</span><span class="n">attach</span> <span class="n">dashboardGrid</span> <span class="p">(</span><span class="n">kpiCustomers</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Grid</span><span class="p">.</span><span class="n">attach</span> <span class="n">dashboardGrid</span> <span class="p">(</span><span class="n">kpiShipment</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The dashboard also includes navigation buttons to other parts of the application:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* Sales Order Button *)</span>
<span class="kr">val</span> <span class="nv">salesOrderBtn</span> <span class="p">=</span> <span class="nn">Button</span><span class="p">.</span><span class="n">newWithLabel</span> <span class="s2">&quot;Sales Order&quot;</span>
<span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setSizeRequest</span> <span class="n">salesOrderBtn</span> <span class="p">(</span><span class="mi">180</span><span class="p">,</span> <span class="mi">36</span><span class="p">)</span>
<span class="kr">val</span> <span class="nv">buttonRow</span> <span class="p">=</span> <span class="nn">LeftAlignedButtonRow</span><span class="p">.</span><span class="n">create</span> <span class="p">[</span><span class="n">salesOrderBtn</span><span class="p">]</span>

<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">packStart</span> <span class="n">contentBox</span> <span class="p">(</span><span class="n">buttonRow</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="cm">(* Connect the button to navigation *)</span>
<span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Signal</span><span class="p">.</span><span class="n">connect</span> <span class="n">salesOrderBtn</span> <span class="p">(</span><span class="nn">Button</span><span class="p">.</span><span class="n">clickedSig</span><span class="p">,</span> <span class="kr">fn</span> <span class="p">_</span> <span class="p">=&gt;</span>
  <span class="kr">let</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="n">print</span> <span class="p">(</span><span class="s2">&quot;Navigating to Sales Order Page</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Stack</span><span class="p">.</span><span class="n">setVisibleChildName</span> <span class="n">stack</span> <span class="s2">&quot;salesorder&quot;</span>
  <span class="kr">in</span>
    <span class="p">()</span>
  <span class="kr">end</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="inventorypage-implementation">
<h2>InventoryPage Implementation<a class="headerlink" href="#inventorypage-implementation" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">InventoryPage</span></code> provides a complete data management interface with a dynamic table for inventory items. From <code class="docutils literal notranslate"><span class="pre">InventoryPage.sml</span></code>:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* Apply BasePage functor *)</span>
<span class="kr">structure</span> <span class="nn">InventoryBase</span> <span class="p">=</span> <span class="n">BasePage</span><span class="p">(</span><span class="kr">struct</span> <span class="kr">val</span> <span class="nv">title</span> <span class="p">=</span> <span class="s2">&quot;Inventory&quot;</span> <span class="kr">end</span><span class="p">)</span>

<span class="kr">fun</span> <span class="nf">create</span> <span class="p">{</span><span class="n">stack</span> <span class="p">:</span> <span class="nn">Gtk</span><span class="p">.</span><span class="nn">Stack</span><span class="p">.</span><span class="n">t</span><span class="p">,</span> <span class="n">menuItems</span> <span class="p">:</span> <span class="p">(</span><span class="n">string</span> <span class="n">*</span> <span class="n">string</span><span class="p">)</span> <span class="n">list</span> <span class="n">option</span><span class="p">}</span> <span class="p">=</span>
  <span class="kr">let</span>
    <span class="cm">(* Base page and content container *)</span>
    <span class="kr">val</span> <span class="p">(</span><span class="n">basePage</span><span class="p">,</span> <span class="n">contentBox</span><span class="p">)</span> <span class="nv">=</span> <span class="nn">InventoryBase</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span>
      <span class="n">stack</span> <span class="p">=</span> <span class="n">stack</span><span class="p">,</span>
      <span class="n">menuItems</span> <span class="p">=</span> <span class="n">menuItems</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>A key feature of the InventoryPage is the table that regenerates when data is modified. This demonstrates functional state management in UI development:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* Function to regenerate the entire table when data changes *)</span>
<span class="kr">fun</span> <span class="nf">refreshTable</span> <span class="p">()</span> <span class="p">=</span>
  <span class="kr">let</span>
    <span class="kr">val</span> <span class="nv">oldGrid</span> <span class="p">=</span> <span class="n">!tableGrid</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Container</span><span class="p">.</span><span class="n">remove</span> <span class="n">tableScrollWindow</span> <span class="n">oldGrid</span>

    <span class="kr">val</span> <span class="nv">newGrid</span> <span class="p">=</span> <span class="nn">Grid</span><span class="p">.</span><span class="n">new</span> <span class="p">()</span>
    <span class="cm">(* ... table population code ... *)</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">CssLoader</span><span class="p">.</span><span class="n">addClassToWidget</span> <span class="n">newGrid</span> <span class="s2">&quot;excel-table-border&quot;</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Container</span><span class="p">.</span><span class="n">add</span> <span class="n">tableScrollWindow</span> <span class="n">newGrid</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">showAll</span> <span class="n">newGrid</span>
  <span class="kr">in</span>
    <span class="p">()</span>
  <span class="kr">end</span>
</pre></div>
</div>
<p>The InventoryPage implements CRUD operations through a modal dialog for adding inventory items:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Signal</span><span class="p">.</span><span class="n">connect</span> <span class="n">addBtn</span> <span class="p">(</span><span class="nn">Button</span><span class="p">.</span><span class="n">clickedSig</span><span class="p">,</span> <span class="kr">fn</span> <span class="p">_</span> <span class="p">=&gt;</span>
  <span class="kr">let</span>
    <span class="kr">val</span> <span class="nv">dialog</span> <span class="p">=</span> <span class="nn">Dialog</span><span class="p">.</span><span class="n">new</span> <span class="p">()</span>
    <span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Window</span><span class="p">.</span><span class="n">setTitle</span> <span class="n">dialog</span> <span class="s2">&quot;Add Inventory Item&quot;</span>
    <span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Window</span><span class="p">.</span><span class="n">setDefaultSize</span> <span class="n">dialog</span> <span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
    <span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Dialog</span><span class="p">.</span><span class="n">addButton</span> <span class="n">dialog</span> <span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">,</span> <span class="nn">LargeInt</span><span class="p">.</span><span class="n">fromInt</span> <span class="p">(</span><span class="nn">IntInf</span><span class="p">.</span><span class="n">toInt</span> <span class="nn">ResponseType</span><span class="p">.</span><span class="n">CANCEL</span><span class="p">))</span>
    <span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Dialog</span><span class="p">.</span><span class="n">addButton</span> <span class="n">dialog</span> <span class="p">(</span><span class="s2">&quot;Add&quot;</span><span class="p">,</span> <span class="nn">LargeInt</span><span class="p">.</span><span class="n">fromInt</span> <span class="p">(</span><span class="nn">IntInf</span><span class="p">.</span><span class="n">toInt</span> <span class="nn">ResponseType</span><span class="p">.</span><span class="n">OK</span><span class="p">))</span>
    <span class="kr">val</span> <span class="nv">contentArea</span> <span class="p">=</span> <span class="nn">Dialog</span><span class="p">.</span><span class="n">getContentArea</span> <span class="n">dialog</span>

    <span class="kr">val</span> <span class="nv">nameLabel</span> <span class="p">=</span> <span class="nn">Label</span><span class="p">.</span><span class="n">new</span> <span class="p">(</span><span class="n">SOME</span> <span class="s2">&quot;Name:&quot;</span><span class="p">)</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setHalign</span> <span class="n">nameLabel</span> <span class="nn">Align</span><span class="p">.</span><span class="n">START</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">packStart</span> <span class="n">contentArea</span> <span class="p">(</span><span class="n">nameLabel</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">xxsmall</span><span class="p">)</span>
    <span class="kr">val</span> <span class="nv">nameEntry</span> <span class="p">=</span> <span class="nn">Entry</span><span class="p">.</span><span class="n">new</span> <span class="p">()</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setSizeRequest</span> <span class="n">nameEntry</span> <span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">packStart</span> <span class="n">contentArea</span> <span class="p">(</span><span class="n">nameEntry</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">xxsmall</span><span class="p">)</span>

    <span class="cm">(* ... other fields ... *)</span>

    <span class="cm">(* Process dialog response *)</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="kr">if</span> <span class="n">resp</span> <span class="p">=</span> <span class="nn">ResponseType</span><span class="p">.</span><span class="n">OK</span> <span class="kr">then</span>
      <span class="kr">let</span>
        <span class="kr">val</span> <span class="nv">n</span> <span class="p">=</span> <span class="nn">Entry</span><span class="p">.</span><span class="n">getText</span> <span class="n">nameEntry</span>
        <span class="kr">val</span> <span class="nv">s</span> <span class="p">=</span> <span class="nn">Entry</span><span class="p">.</span><span class="n">getText</span> <span class="n">skuEntry</span>
        <span class="kr">val</span> <span class="nv">qText</span> <span class="p">=</span> <span class="nn">Entry</span><span class="p">.</span><span class="n">getText</span> <span class="n">qtyEntry</span>
        <span class="kr">val</span> <span class="nv">pText</span> <span class="p">=</span> <span class="nn">Entry</span><span class="p">.</span><span class="n">getText</span> <span class="n">priceEntry</span>

        <span class="cm">(* ... validation code ... *)</span>

        <span class="cm">(* Only add if we have required fields and valid numeric values *)</span>
        <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="kr">if</span> <span class="n">n</span> <span class="n">&lt;&gt;</span> <span class="s2">&quot;&quot;</span> <span class="kr">andalso</span> <span class="n">s</span> <span class="n">&lt;&gt;</span> <span class="s2">&quot;&quot;</span> <span class="kr">andalso</span> <span class="n">isValidInt</span> <span class="n">qText</span> <span class="kr">andalso</span> <span class="n">isValidReal</span> <span class="n">pText</span> <span class="kr">then</span>
          <span class="kr">let</span>
            <span class="kr">val</span> <span class="nv">newList</span> <span class="p">=</span> <span class="n">!inventoryItemsRef</span> <span class="n">@</span> <span class="p">[(</span><span class="n">n</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">q</span><span class="p">,</span><span class="n">p</span><span class="p">)]</span>
            <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="n">inventoryItemsRef</span> <span class="n">:=</span> <span class="n">newList</span>
            <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="n">refreshTable</span> <span class="p">()</span>
          <span class="kr">in</span> <span class="p">()</span> <span class="kr">end</span>
        <span class="kr">else</span>
          <span class="p">(</span>
            <span class="nn">ErrorDialog</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span>
              <span class="n">title</span> <span class="p">=</span> <span class="s2">&quot;Input Error&quot;</span><span class="p">,</span>
              <span class="n">message</span> <span class="p">=</span> <span class="s2">&quot;Please enter valid values. Quantity must be an integer and Price must be a number.&quot;</span>
            <span class="p">}</span>
          <span class="p">)</span>
      <span class="kr">in</span> <span class="p">()</span> <span class="kr">end</span>
    <span class="kr">else</span> <span class="p">()</span>
  <span class="kr">in</span> <span class="p">()</span> <span class="kr">end</span><span class="p">)</span>
</pre></div>
</div>
<p>The InventoryPage also provides functionality to remove selected items:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="kr">val</span> <span class="nv">removeButton</span> <span class="p">=</span> <span class="nn">Button</span><span class="p">.</span><span class="n">newWithLabel</span> <span class="s2">&quot;Remove Selected&quot;</span>
<span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Signal</span><span class="p">.</span><span class="n">connect</span> <span class="n">removeButton</span> <span class="p">(</span><span class="nn">Button</span><span class="p">.</span><span class="n">clickedSig</span><span class="p">,</span> <span class="kr">fn</span> <span class="p">_</span> <span class="p">=&gt;</span>
    <span class="kr">let</span>
        <span class="kr">val</span> <span class="nv">selectedRow</span> <span class="p">=</span> <span class="nn">TableUtils</span><span class="p">.</span><span class="n">getSelectedRow</span> <span class="n">inventoryTable</span>
        <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="kr">case</span> <span class="n">selectedRow</span> <span class="kr">of</span>
            <span class="n">SOME</span> <span class="n">rowIndex</span> <span class="p">=&gt;</span> <span class="p">(</span>
                <span class="nn">TableUtils</span><span class="p">.</span><span class="n">removeTableRow</span> <span class="n">inventoryTable</span> <span class="n">rowIndex</span><span class="p">;</span>
                <span class="n">print</span> <span class="p">(</span><span class="s2">&quot;Removed inventory item at row &quot;</span> <span class="n">^</span> <span class="nn">Int</span><span class="p">.</span><span class="n">toString</span> <span class="n">rowIndex</span> <span class="n">^</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="p">)</span>
          <span class="n">|</span> <span class="n">NONE</span> <span class="p">=&gt;</span> <span class="n">print</span> <span class="s2">&quot;No row selected to remove</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="kr">in</span>
        <span class="p">()</span>
    <span class="kr">end</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="salesorderpage-implementation">
<h2>SalesOrderPage Implementation<a class="headerlink" href="#salesorderpage-implementation" title="Link to this heading">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">SalesOrderPage</span></code> provides functionality for viewing and managing customer orders. From <code class="docutils literal notranslate"><span class="pre">SalesOrderPage.sml</span></code>:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="kr">structure</span> <span class="nn">SalesOrderPage</span> <span class="p">:&gt;</span> <span class="n">PAGE</span> <span class="p">=</span> <span class="kr">struct</span>
  <span class="kr">structure</span> <span class="nn">Gtk</span> <span class="p">=</span> <span class="n">Gtk</span>
  <span class="kr">open</span> <span class="nn">Gtk</span>

  <span class="kr">structure</span> <span class="nn">SalesOrderBase</span> <span class="p">=</span> <span class="n">BasePage</span><span class="p">(</span><span class="kr">struct</span> <span class="kr">val</span> <span class="nv">title</span> <span class="p">=</span> <span class="s2">&quot;Sales Orders&quot;</span> <span class="kr">end</span><span class="p">)</span>

  <span class="kr">fun</span> <span class="nf">create</span> <span class="p">{</span><span class="n">stack</span><span class="p">:</span> <span class="nn">Gtk</span><span class="p">.</span><span class="nn">Stack</span><span class="p">.</span><span class="n">t</span><span class="p">,</span> <span class="n">menuItems</span><span class="p">:</span> <span class="p">(</span><span class="n">string</span> <span class="n">*</span> <span class="n">string</span><span class="p">)</span> <span class="n">list</span> <span class="n">option</span><span class="p">}</span> <span class="p">=</span>
    <span class="kr">let</span>
      <span class="kr">val</span> <span class="p">(</span><span class="n">basePage</span><span class="p">,</span> <span class="n">contentBox</span><span class="p">)</span> <span class="nv">=</span> <span class="nn">SalesOrderBase</span><span class="p">.</span><span class="n">create</span><span class="p">{</span>
        <span class="n">stack</span> <span class="p">=</span> <span class="n">stack</span><span class="p">,</span>
        <span class="n">menuItems</span> <span class="p">=</span> <span class="n">menuItems</span>
      <span class="p">}</span>
</pre></div>
</div>
<p>The SalesOrderPage implements a table for displaying order data:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* --- Sales Order Specific Content --- *)</span>
<span class="kr">val</span> <span class="nv">frame</span> <span class="p">=</span> <span class="nn">Frame</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">NONE</span><span class="p">)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginTop</span> <span class="n">frame</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">medium</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginStart</span> <span class="n">frame</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">large</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginEnd</span> <span class="n">frame</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">large</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginBottom</span> <span class="n">frame</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">large</span>

<span class="kr">val</span> <span class="nv">tableBox</span> <span class="p">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">new</span> <span class="p">(</span><span class="nn">Orientation</span><span class="p">.</span><span class="n">VERTICAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Container</span><span class="p">.</span><span class="n">add</span> <span class="n">frame</span> <span class="n">tableBox</span>

<span class="kr">val</span> <span class="nv">headerRow</span> <span class="p">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">new</span> <span class="p">(</span><span class="nn">Orientation</span><span class="p">.</span><span class="n">HORIZONTAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">setHomogeneous</span> <span class="n">headerRow</span> <span class="n">true</span>

<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">List</span><span class="p">.</span><span class="n">app</span> <span class="p">(</span><span class="kr">fn</span> <span class="n">text</span> <span class="p">=&gt;</span>
  <span class="kr">let</span>
    <span class="kr">val</span> <span class="nv">label</span> <span class="p">=</span> <span class="nn">Label</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="n">SOME</span> <span class="n">text</span><span class="p">)</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Label</span><span class="p">.</span><span class="n">setMarkup</span> <span class="n">label</span> <span class="p">(</span><span class="s2">&quot;&lt;b&gt;&quot;</span> <span class="n">^</span> <span class="n">text</span> <span class="n">^</span> <span class="s2">&quot;&lt;/b&gt;&quot;</span><span class="p">)</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setHalign</span> <span class="n">label</span> <span class="nn">Align</span><span class="p">.</span><span class="n">START</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginStart</span> <span class="n">label</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">small</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginEnd</span> <span class="n">label</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">small</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginTop</span> <span class="n">label</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">small</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Widget</span><span class="p">.</span><span class="n">setMarginBottom</span> <span class="n">label</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">small</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">packStart</span> <span class="n">headerRow</span> <span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="n">true</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
  <span class="kr">in</span>
    <span class="p">()</span>
  <span class="kr">end</span><span class="p">)</span> <span class="p">(</span><span class="nn">SalesOrderData</span><span class="p">.</span><span class="n">headers</span><span class="p">)</span>
</pre></div>
</div>
<p>The SalesOrderPage also provides navigation back to the dashboard:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="kr">val</span> <span class="nv">backButton</span> <span class="p">=</span> <span class="nn">Button</span><span class="p">.</span><span class="n">newWithLabel</span> <span class="s2">&quot;Back to Dashboard&quot;</span>
<span class="kr">val</span> <span class="nv">buttonRow</span> <span class="p">=</span> <span class="nn">LeftAlignedButtonRow</span><span class="p">.</span><span class="n">create</span> <span class="p">[</span><span class="n">backButton</span><span class="p">]</span>

<span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Signal</span><span class="p">.</span><span class="n">connect</span> <span class="n">backButton</span> <span class="p">(</span><span class="nn">Button</span><span class="p">.</span><span class="n">clickedSig</span><span class="p">,</span> <span class="kr">fn</span> <span class="p">_</span> <span class="p">=&gt;</span>
  <span class="kr">let</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="n">print</span> <span class="p">(</span><span class="s2">&quot;Navigating back to Dashboard</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Stack</span><span class="p">.</span><span class="n">setVisibleChildName</span> <span class="n">stack</span> <span class="s2">&quot;dashboard&quot;</span>
  <span class="kr">in</span>
    <span class="p">()</span>
  <span class="kr">end</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="customizing-page-templates">
<h2>Customizing Page Templates<a class="headerlink" href="#customizing-page-templates" title="Link to this heading">¶</a></h2>
<p>You can customize any of the provided page templates for your specific requirements:</p>
<ol class="arabic simple">
<li><p><strong>Component Replacement</strong>: Replace standard components with custom versions</p></li>
<li><p><strong>Content Adaptation</strong>: Modify the content layout and widgets</p></li>
<li><p><strong>Behavior Extension</strong>: Add additional functionality to standard pages</p></li>
</ol>
<p><strong>Example: Customizing the Login Page</strong></p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* Create a custom login page with branding *)</span>
<span class="kr">structure</span> <span class="nn">CustomLoginPage</span> <span class="p">=</span> <span class="kr">struct</span>
    <span class="cm">(* Reuse core login functionality *)</span>
    <span class="kr">fun</span> <span class="nf">create</span> <span class="p">{</span><span class="n">stack</span><span class="p">}</span> <span class="p">=</span>
        <span class="kr">let</span>
            <span class="cm">(* Create standard login page *)</span>
            <span class="kr">val</span> <span class="nv">basePage</span> <span class="p">=</span> <span class="nn">LoginPage</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span><span class="n">stack</span> <span class="p">=</span> <span class="n">stack</span><span class="p">}</span>

            <span class="cm">(* Add custom branding *)</span>
            <span class="kr">val</span> <span class="nv">brandingBox</span> <span class="p">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">new</span> <span class="p">(</span><span class="nn">Orientation</span><span class="p">.</span><span class="n">VERTICAL</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="kr">val</span> <span class="nv">brandingLabel</span> <span class="p">=</span> <span class="nn">Label</span><span class="p">.</span><span class="n">new</span> <span class="p">(</span><span class="n">SOME</span> <span class="s2">&quot;CustomCorp ERP&quot;</span><span class="p">)</span>
            <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Label</span><span class="p">.</span><span class="n">setMarkup</span> <span class="n">brandingLabel</span> <span class="s2">&quot;&lt;span size=&#39;xx-large&#39;&gt;CustomCorp ERP&lt;/span&gt;&quot;</span>
            <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">packStart</span> <span class="n">brandingBox</span> <span class="p">(</span><span class="n">brandingLabel</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="n">false</span><span class="p">,</span> <span class="nn">SpacingScale</span><span class="p">.</span><span class="n">large</span><span class="p">)</span>

            <span class="cm">(* Insert at top of page *)</span>
            <span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Box</span><span class="p">.</span><span class="n">reorderChild</span> <span class="n">basePage</span> <span class="p">(</span><span class="n">brandingBox</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="kr">in</span>
            <span class="n">basePage</span>
        <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
</section>
<section id="navigation-architecture">
<h2>Navigation Architecture<a class="headerlink" href="#navigation-architecture" title="Link to this heading">¶</a></h2>
<p>The ERP UI Library uses GTK’s Stack widget for navigation between pages, combined with a functional approach to page transitions:</p>
<div class="highlight-sml notranslate"><div class="highlight"><pre><span></span><span class="cm">(* Set up navigation stack *)</span>
<span class="kr">val</span> <span class="nv">navigationStack</span> <span class="p">=</span> <span class="nn">Stack</span><span class="p">.</span><span class="n">new</span> <span class="p">()</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Stack</span><span class="p">.</span><span class="n">setTransitionType</span> <span class="n">navigationStack</span> <span class="nn">StackTransitionType</span><span class="p">.</span><span class="n">SLIDE_LEFT_RIGHT</span>

<span class="cm">(* Create application pages *)</span>
<span class="kr">val</span> <span class="nv">loginPage</span> <span class="p">=</span> <span class="nn">LoginPage</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span><span class="n">stack</span> <span class="p">=</span> <span class="n">navigationStack</span><span class="p">}</span>
<span class="kr">val</span> <span class="p">(</span><span class="n">dashboardPage</span><span class="p">,</span> <span class="err">_</span><span class="p">)</span> <span class="nv">=</span> <span class="nn">DashboardPage</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span><span class="n">stack</span> <span class="p">=</span> <span class="n">navigationStack</span><span class="p">,</span> <span class="p">...}</span>

<span class="cm">(* Add pages to navigation stack *)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Stack</span><span class="p">.</span><span class="n">addNamed</span> <span class="n">navigationStack</span> <span class="p">(</span><span class="n">loginPage</span><span class="p">,</span> <span class="s2">&quot;login&quot;</span><span class="p">)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="nn">Stack</span><span class="p">.</span><span class="n">addNamed</span> <span class="n">navigationStack</span> <span class="p">(</span><span class="n">dashboardPage</span><span class="p">,</span> <span class="s2">&quot;dashboard&quot;</span><span class="p">)</span>

<span class="cm">(* Navigation function *)</span>
<span class="kr">fun</span> <span class="nf">navigateTo</span> <span class="n">pageName</span> <span class="p">=</span> <span class="nn">Stack</span><span class="p">.</span><span class="n">setVisibleChildName</span> <span class="n">navigationStack</span> <span class="n">pageName</span>

<span class="cm">(* Navigate programmatically *)</span>
<span class="kr">val</span> <span class="p">()</span> <span class="nv">=</span> <span class="n">navigateTo</span> <span class="s2">&quot;login&quot;</span>

<span class="cm">(* Or connect to a button click *)</span>
<span class="kr">val</span> <span class="p">_</span> <span class="p">=</span> <span class="nn">Signal</span><span class="p">.</span><span class="n">connect</span> <span class="n">logoutButton</span> <span class="p">(</span><span class="nn">Button</span><span class="p">.</span><span class="n">clickedSig</span><span class="p">,</span> <span class="kr">fn</span> <span class="p">_</span> <span class="p">=&gt;</span> <span class="n">navigateTo</span> <span class="s2">&quot;login&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">¶</a></h2>
<p>The Pages module demonstrates how functional programming principles can effectively structure complex UI components:</p>
<ol class="arabic simple">
<li><p><strong>Functors for Templating</strong>: BasePage functor creates consistent pages</p></li>
<li><p><strong>Composition</strong>: Building complex pages by composing smaller components</p></li>
<li><p><strong>Separation of Concerns</strong>: Clear distinction between structure and content</p></li>
<li><p><strong>Type Safety</strong>: Using SML’s type system to ensure interface consistency</p></li>
</ol>
<p>Key Navigation Concepts:</p>
<ol class="arabic simple">
<li><p><strong>Declarative Transitions</strong>: Page transitions are handled through declarative function calls</p></li>
<li><p><strong>Stack-Based Architecture</strong>: Pages are managed in a stack for efficient memory usage</p></li>
<li><p><strong>Named Pages</strong>: Pages are referenced by name for easy navigation</p></li>
<li><p><strong>Clean Separation</strong>: Navigation logic is separated from page content</p></li>
</ol>
</section>
<section id="best-practices">
<h2>Best Practices<a class="headerlink" href="#best-practices" title="Link to this heading">¶</a></h2>
<p>When developing with the Pages module:</p>
<ol class="arabic simple">
<li><p><strong>Use the BasePage Functor</strong>: Start with the BasePage functor to ensure consistency</p></li>
<li><p><strong>Separate Content Creation</strong>: Keep page-specific content creation separate from the base page</p></li>
<li><p><strong>Handle Events Functionally</strong>: Use higher-order functions for event handling</p></li>
<li><p><strong>Maintain Immutability</strong>: Don’t modify page components after creation</p></li>
<li><p><strong>Follow Navigation Patterns</strong>: Use consistent navigation methods between pages</p></li>
</ol>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">SML Dissertation Project</a></h1>








<div class="sphinxsidebarwrapper">
    <h3>On this page</h3>
    <ul>
<li><a class="reference internal" href="#">Pages</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#creating-pages-the-basepage-pattern">Creating Pages: The BasePage Pattern</a></li>
<li><a class="reference internal" href="#page-templates">Page Templates</a><ul>
<li><a class="reference internal" href="#loginpage-authentication-template">LoginPage: Authentication Template</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-a-page-using-basepage">Creating a Page Using BasePage</a></li>
<li><a class="reference internal" href="#navigation-in-basepage">Navigation in BasePage</a></li>
<li><a class="reference internal" href="#loginpage-implementation">LoginPage Implementation</a></li>
<li><a class="reference internal" href="#dashboardpage-implementation">DashboardPage Implementation</a></li>
<li><a class="reference internal" href="#inventorypage-implementation">InventoryPage Implementation</a></li>
<li><a class="reference internal" href="#salesorderpage-implementation">SalesOrderPage Implementation</a></li>
<li><a class="reference internal" href="#customizing-page-templates">Customizing Page Templates</a></li>
<li><a class="reference internal" href="#navigation-architecture">Navigation Architecture</a></li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
<li><a class="reference internal" href="#best-practices">Best Practices</a></li>
</ul>
</li>
</ul>

  <h3>Navigation</h3>
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
  <ul>
    <li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
    <li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
    <li class="toctree-l1"><a class="reference internal" href="usage.html">Usage Guide</a></li>
  </ul>
  <p class="caption" role="heading"><span class="caption-text">Library Components</span></p>
  <ul>
    <li class="toctree-l1"><a class="reference internal" href="tokens.html">Design Tokens</a></li>
    <li class="toctree-l1"><a class="reference internal" href="layout_components.html">Layout Components</a></li>
    <li class="toctree-l1"><a class="reference internal" href="dashboard_components.html">Dashboard Components</a></li>
    <li class="toctree-l1"><a class="reference internal" href="#">Pages</a></li>
    <li class="toctree-l1"><a class="reference internal" href="utils.html">Utilities</a></li>
  </ul>
  <ul>
    <li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
  </ul>
</div><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="dashboard_components.html" title="previous chapter">Dashboard Components</a></li>
      <li>Next: <a href="utils.html" title="next chapter">Utilities</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/pages.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>